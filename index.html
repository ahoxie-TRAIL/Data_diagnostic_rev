<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nonprofit Data Diagnostic Tool</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts@2.10.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script type="text/babel">
    const { useState } = React;

    function NonprofitDataDiagnostic() {
      const [responses, setResponses] = useState({});
      const [showResults, setShowResults] = useState(false);
      const [showIntro, setShowIntro] = useState(true);
      const [expandedReflection, setExpandedReflection] = useState({});
      const [userInfo, setUserInfo] = useState({
        firstName: '',
        lastName: '',
        organizationName: '',
        email: '',
        phone: '',
        role: ''
      });
      const [formSubmitted, setFormSubmitted] = useState(false);

      const questions = [
        {
          id: 1,
          step: "01. IDENTIFY YOUR DATA GOALS",
          question: "Does your team have a common data goal?",
          reflectionPrompts: [
            "What clarity goal do you have for your organization's data? (e.g., improving funder reports, enhancing internal communication, strategic planning)",
            "Is your data currently illustrating the impact of your mission?"
          ],
          answers: [
            { value: 'A', text: "Yes, our team is aligned on our data goal(s).", score: 3 },
            { value: 'B', text: "Sort ofâ€”many members of the team share the same goal but a few folks do not.", score: 2 },
            { value: 'C', text: "No, our team members are not clear or aligned on our data goal(s).", score: 1 }
          ]
        },
        {
          id: 2,
          step: "02. TAKE A DATA INVENTORY",
          question: "Do you have a comprehensive list of all your data sources?",
          reflectionPrompts: [
            "What are your nonprofit's data sources? (e.g., donor databases, program records, financial reports, survey responses, website analytics, volunteer sign-ups)",
            "Where does your data currently reside across your organization?",
            "Who owns each data source within your organization?"
          ],
          answers: [
            { value: 'A', text: "Yes, it is complete and regularly updated.", score: 3 },
            { value: 'B', text: "Partiallyâ€”we have some key sources listed.", score: 2 },
            { value: 'C', text: "No, our data sources are scattered and undocumented.", score: 1 }
          ]
        },
        {
          id: 3,
          step: "03. DOCUMENT THE TYPE OF DATA IN EACH SOURCE",
          question: "Do you have documented details about your data (quantitative vs. qualitative, key variables, update frequency)?",
          reflectionPrompts: [
            "For each data source, do you know: Is the data quantitative or qualitative?",
            "What key variables are tracked in each source?",
            "How frequently is the data updated?",
            "Do you understand the depth and breadth of your data well enough to access and utilize it effectively?"
          ],
          answers: [
            { value: 'A', text: "Yes, for all sources.", score: 3 },
            { value: 'B', text: "Partially, for our most-used sources.", score: 2 },
            { value: 'C', text: "No, our documentation is incomplete or nonexistent.", score: 1 }
          ]
        },
        {
          id: 4,
          step: "04. HIGHLIGHT THE MOST IMPORTANT DATA",
          question: "Do you regularly prioritize and use your most impactful data?",
          reflectionPrompts: [
            "Which data are most important or widely used at your organization?",
            "Which data do you reference most often in reports?",
            "What metrics are essential for grant applications and funding requests?",
            "What data best demonstrates impact to stakeholders?",
            "Are we measuring what matters to our participants, or just what's easy to count?"
          ],
          answers: [
            { value: 'A', text: "Yes, consistently in all reporting and decision-making.", score: 3 },
            { value: 'B', text: "Sometimesâ€”we use it for major reports.", score: 2 },
            { value: 'C', text: "Rarelyâ€”we're unsure what data points are most impactful.", score: 1 }
          ]
        },
        {
          id: 5,
          step: "05. INCORPORATE COMMUNITY VOICE",
          question: "Is your data approach shaped by community feedback?",
          reflectionPrompts: [
            "How do you use data to empower and advocate for community needs?",
            "Are we measuring what matters to our participants, or just what's easy to count?",
            "Does our data approach reflect the community's definition of success?",
            "Are we gathering data in ways that benefit the communities we serve, not just satisfy funders?"
          ],
          answers: [
            { value: 'A', text: "Yes, consistently and transparently.", score: 3 },
            { value: 'B', text: "Occasionallyâ€”we include community feedback sporadically.", score: 2 },
            { value: 'C', text: "Rarely or neverâ€”we've yet to integrate this perspective.", score: 1 }
          ]
        },
        {
          id: 6,
          step: "06. ESTABLISH CLEAR DATA GOVERNANCE",
          question: "Do you have clear guidelines and training for data management?",
          reflectionPrompts: [
            "Does your organization have well-defined roles and responsibilities for data management?",
            "Do you have standardized procedures for data collection and reporting?",
            "Are there clear access controls to ensure data security?",
            "Are staff trained on data practices and governance?",
            "Can your team clearly answer 'whose numbers are right?' when reports conflict?"
          ],
          answers: [
            { value: 'A', text: "Yes, we have thoroughly documented guidelines and processes for training our staff on data management.", score: 3 },
            { value: 'B', text: "Some guidelines exist, but training is minimal.", score: 2 },
            { value: 'C', text: "No, we lack structured guidelines or training.", score: 1 }
          ]
        }
      ];

      const handleResponse = (questionId, answer) => {
        setResponses({
          ...responses,
          [questionId]: answer
        });
      };

      const calculateResults = () => {
        const scores = Object.values(responses);
        const aCount = Object.values(responses).filter(r => r.value === 'A').length;
        const bCount = Object.values(responses).filter(r => r.value === 'B').length;
        const cCount = Object.values(responses).filter(r => r.value === 'C').length;
        const totalScore = scores.reduce((sum, answer) => sum + answer.score, 0);
        const averageScore = totalScore / scores.length;

        let level = '';
        let interpretation = '';
        let nextSteps = [];
        let color = '';

        if (aCount >= 4) {
          level = 'A';
          color = '#10b981';
          interpretation = "You're on the right track! Keep refining your data practices and ensure you have sustainable strategies to maintain your efforts.";
          nextSteps = [
            "Continue documenting and updating your data practices",
            "Build team capacity for advanced data analysis",
            "Develop sustainability measures for long-term data culture",
            "Consider publishing or sharing your impact stories",
            "Establish regular review cycles to maintain momentum"
          ];
        } else if (bCount >= 4 || averageScore >= 1.8) {
          level = 'B';
          color = '#f59e0b';
          interpretation = "Good start! You may benefit from reflecting on areas where you can strengthen your data clarity.";
          nextSteps = [
            "Align your team on shared data goals through facilitated conversations",
            "Create a complete inventory of all data sources across your organization",
            "Develop documentation templates for data descriptions",
            "Identify 3-5 priority metrics to focus on first",
            "Schedule team training on data governance basics"
          ];
        } else {
          level = 'C';
          color = '#ef4444';
          interpretation = "It's time to build a robust foundation. Prioritize building a framework to effectively organize and leverage your data.";
          nextSteps = [
            "Start with a data discovery session with key stakeholders",
            "Create a simple one-page inventory of current data sources",
            "Identify one person as a data champion to lead initial efforts",
            "Select 2-3 priority data sources to document first",
            "Schedule a 90-day sprint to establish basic data governance",
            "Consider bringing in external support to guide the process"
          ];
        }

        return {
          aCount,
          bCount,
          cCount,
          totalScore,
          averageScore,
          level,
          interpretation,
          nextSteps,
          color,
          completed: Object.keys(responses).length === questions.length
        };
      };

      const downloadReport = () => {
        const results = calculateResults();
        const reportContent = `
          <div style="font-family: Arial, sans-serif; padding: 40px; max-width: 900px; margin: 0 auto;">
            <h1 style="color: #1f2937; text-align: center; margin-bottom: 10px;">Nonprofit Data Diagnostic Report</h1>
            <p style="text-align: center; color: #6b7280; margin-bottom: 30px;">6 Steps to Prove Your Nonprofit's Impact</p>
            
            <hr style="border: none; border-top: 2px solid #e5e7eb; margin: 30px 0;">
            
            <h2 style="color: #1f2937; margin-top: 30px;">Organization Information</h2>
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 30px;">
              <tr>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;"><strong>Name:</strong></td>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;">${userInfo.firstName} ${userInfo.lastName}</td>
              </tr>
              <tr>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;"><strong>Organization:</strong></td>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;">${userInfo.organizationName}</td>
              </tr>
              <tr>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;"><strong>Role:</strong></td>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;">${userInfo.role || 'Not provided'}</td>
              </tr>
              <tr>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;"><strong>Email:</strong></td>
                <td style="padding: 8px; border-bottom: 1px solid #e5e7eb;">${userInfo.email}</td>
              </tr>
              <tr>
                <td style="padding: 8px;"><strong>Phone:</strong></td>
                <td style="padding: 8px;">${userInfo.phone}</td>
              </tr>
            </table>

            <hr style="border: none; border-top: 2px solid #e5e7eb; margin: 30px 0;">

            <h2 style="color: #1f2937; margin-top: 30px;">Assessment Results</h2>
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
              <p style="color: #6b7280; margin: 0 0 10px 0;">Data Maturity Level</p>
              <p style="font-size: 48px; font-weight: bold; color: ${results.color}; margin: 0;">${results.level}</p>
            </div>

            <h3 style="color: #1f2937; margin-top: 20px;">Interpretation</h3>
            <p style="color: #374151; line-height: 1.6;">${results.interpretation}</p>

            <h3 style="color: #1f2937; margin-top: 20px;">Response Summary</h3>
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
              <tr>
                <td style="padding: 12px; background-color: #f0fdf4; border: 1px solid #e5e7eb;"><strong>Strong Responses (A)</strong></td>
                <td style="padding: 12px; background-color: #f0fdf4; border: 1px solid #e5e7eb; text-align: center; font-size: 20px; font-weight: bold;">${results.aCount}</td>
              </tr>
              <tr>
                <td style="padding: 12px; background-color: #fffbeb; border: 1px solid #e5e7eb;"><strong>Developing Responses (B)</strong></td>
                <td style="padding: 12px; background-color: #fffbeb; border: 1px solid #e5e7eb; text-align: center; font-size: 20px; font-weight: bold;">${results.bCount}</td>
              </tr>
              <tr>
                <td style="padding: 12px; background-color: #fef2f2; border: 1px solid #e5e7eb;"><strong>Building Responses (C)</strong></td>
                <td style="padding: 12px; background-color: #fef2f2; border: 1px solid #e5e7eb; text-align: center; font-size: 20px; font-weight: bold;">${results.cCount}</td>
              </tr>
            </table>

            <h3 style="color: #1f2937; margin-top: 20px;">Your Next Steps</h3>
            <ol style="color: #374151; line-height: 1.8;">
              ${results.nextSteps.map((step, idx) => `<li style="margin-bottom: 10px;">${step}</li>`).join('')}
            </ol>

            <hr style="border: none; border-top: 2px solid #e5e7eb; margin: 30px 0;">

            <h3 style="color: #1f2937;">Detailed Responses</h3>
            ${questions.map((q, idx) => {
              const response = responses[q.id];
              const selectedAnswer = q.answers.find(a => a.value === response?.value);
              return `
                <div style="margin-bottom: 20px; padding: 15px; background-color: #f9fafb; border-radius: 8px;">
                  <p style="color: #1d4ed8; font-weight: 600; margin: 0 0 5px 0;">${q.step}</p>
                  <p style="color: #1f2937; font-weight: 600; margin: 0 0 8px 0;">Q${idx + 1}: ${q.question}</p>
                  <p style="color: #374151; margin: 0;">Answer: <strong>${response?.value || 'Not answered'}</strong> - ${selectedAnswer?.text || ''}</p>
                </div>
              `;
            }).join('')}

            <hr style="border: none; border-top: 2px solid #e5e7eb; margin: 30px 0;">

            <div style="background-color: #eff6ff; padding: 20px; border-left: 4px solid #2563eb; border-radius: 8px; margin-top: 30px;">
              <h3 style="color: #1e3a8a; margin-top: 0;">Next Steps</h3>
              <p style="color: #1e3a8a; margin: 0;">
                Use this report to guide your organization's data improvement efforts. Share these results with your team, 
                pick one next step to focus on first, and reassess your progress in 90 days.
              </p>
            </div>

            <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; color: #6b7280; font-size: 12px;">
              <p>Generated from the Nonprofit Data Diagnostic Tool</p>
              <p>Learn more: www.researchinsightslab.com</p>
              <p>Contact: ahoxie@researchinsightslab.com</p>
            </footer>
          </div>
        `;

        const element = document.createElement('div');
        element.innerHTML = reportContent;

        const opt = {
          margin: 10,
          filename: `${userInfo.organizationName.replace(/\s+/g, '_')}_Data_Diagnostic_Report.pdf`,
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { scale: 2 },
          jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4' }
        };

        html2pdf().set(opt).from(element).save();
      };

      const handleFormChange = (e) => {
        const { name, value } = e.target;
        setUserInfo({
          ...userInfo,
          [name]: value
        });
      };

      const isFormValid = userInfo.firstName && userInfo.lastName && userInfo.organizationName && userInfo.email;

      const allAnswered = Object.keys(responses).length === questions.length;

      return (
        <div style={{ minHeight: '100vh', background: 'linear-gradient(to bottom right, #f0f9ff, #e0e7ff)', padding: '32px' }}>
          <div style={{ maxWidth: '1024px', margin: '0 auto' }}>
            {/* Header */}
            <div style={{ marginBottom: '32px', textAlign: 'center' }}>
              <h1 style={{ fontSize: '36px', fontWeight: 'bold', color: '#1f2937', marginBottom: '8px' }}>
                Nonprofit Data Diagnostic Tool
              </h1>
              <p style={{ fontSize: '20px', color: '#4b5563' }}>
                6 Steps to Prove Your Nonprofit's Impact
              </p>
              <p style={{ fontSize: '14px', color: '#6b7280', marginTop: '8px' }}>
                Turn Data Chaos Into Confident Reporting
              </p>
            </div>

            {!formSubmitted ? (
              // FORM SECTION
              <div style={{ background: 'white', borderRadius: '8px', boxShadow: '0 10px 15px rgba(0,0,0,0.1)', padding: '32px' }}>
                <h2 style={{ fontSize: '24px', fontWeight: 'bold', color: '#1f2937', marginBottom: '24px' }}>
                  Get Started
                </h2>
                <p style={{ color: '#4b5563', marginBottom: '24px' }}>
                  Please provide some basic information. We'll include this on your personalized report.
                </p>

                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '16px', marginBottom: '24px' }}>
                  <div>
                    <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>
                      First Name *
                    </label>
                    <input
                      type="text"
                      name="firstName"
                      value={userInfo.firstName}
                      onChange={handleFormChange}
                      style={{
                        width: '100%',
                        padding: '10px',
                        border: '1px solid #d1d5db',
                        borderRadius: '6px',
                        boxSizing: 'border-box'
                      }}
                      placeholder="Sarah"
                    />
                  </div>

                  <div>
                    <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>
                      Last Name *
                    </label>
                    <input
                      type="text"
                      name="lastName"
                      value={userInfo.lastName}
                      onChange={handleFormChange}
                      style={{
                        width: '100%',
                        padding: '10px',
                        border: '1px solid #d1d5db',
                        borderRadius: '6px',
                        boxSizing: 'border-box'
                      }}
                      placeholder="Smith"
                    />
                  </div>

                  <div>
                    <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>
                      Organization Name *
                    </label>
                    <input
                      type="text"
                      name="organizationName"
                      value={userInfo.organizationName}
                      onChange={handleFormChange}
                      style={{
                        width: '100%',
                        padding: '10px',
                        border: '1px solid #d1d5db',
                        borderRadius: '6px',
                        boxSizing: 'border-box'
                      }}
                      placeholder="Acme Foundation"
                    />
                  </div>

                  <div>
                    <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>
                      Your Role
                    </label>
                    <input
                      type="text"
                      name="role"
                      value={userInfo.role}
                      onChange={handleFormChange}
                      style={{
                        width: '100%',
                        padding: '10px',
                        border: '1px solid #d1d5db',
                        borderRadius: '6px',
                        boxSizing: 'border-box'
                      }}
                      placeholder="Executive Director"
                    />
                  </div>

                  <div>
                    <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>
                      Email *
                    </label>
                    <input
                      type="email"
                      name="email"
                      value={userInfo.email}
                      onChange={handleFormChange}
                      style={{
                        width: '100%',
                        padding: '10px',
                        border: '1px solid #d1d5db',
                        borderRadius: '6px',
                        boxSizing: 'border-box'
                      }}
                      placeholder="sarah@acmefoundation.org"
                    />
                  </div>

                  <div>
                    <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>
                      Phone
                    </label>
                    <input
                      type="tel"
                      name="phone"
                      value={userInfo.phone}
                      onChange={handleFormChange}
                      style={{
                        width: '100%',
                        padding: '10px',
                        border: '1px solid #d1d5db',
                        borderRadius: '6px',
                        boxSizing: 'border-box'
                      }}
                      placeholder="(555) 123-4567"
                    />
                  </div>
                </div>

                <button
                  onClick={() => setFormSubmitted(true)}
                  disabled={!isFormValid}
                  style={{
                    padding: '12px 32px',
                    background: isFormValid ? '#2563eb' : '#9ca3af',
                    color: 'white',
                    fontWeight: 'bold',
                    borderRadius: '8px',
                    border: 'none',
                    fontSize: '16px',
                    cursor: isFormValid ? 'pointer' : 'not-allowed'
                  }}
                >
                  Continue to Assessment
                </button>

                <p style={{ fontSize: '12px', color: '#6b7280', marginTop: '16px' }}>
                  * Required fields. Your information will be included on your downloadable report.
                </p>
              </div>
            ) : showIntro ? (
              // INTRO SECTION
              <div style={{ background: 'white', borderRadius: '8px', boxShadow: '0 10px 15px rgba(0,0,0,0.1)', padding: '32px' }}>
                <div style={{ marginBottom: '20px', padding: '16px', background: '#f0fdf4', borderRadius: '8px', borderLeft: '4px solid #10b981' }}>
                  <p style={{ color: '#166534', margin: 0 }}>
                    âœ“ Welcome, <strong>{userInfo.firstName} {userInfo.lastName}</strong> from <strong>{userInfo.organizationName}</strong>
                  </p>
                </div>

                <section style={{ marginBottom: '32px', paddingBottom: '32px', borderBottom: '2px solid #e5e7eb' }}>
                  <h2 style={{ fontSize: '24px', fontWeight: 'bold', color: '#1f2937', marginBottom: '16px' }}>
                    Does This Sound Familiar?
                  </h2>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '24px', marginBottom: '24px' }}>
                    <div style={{ background: '#fef2f2', borderRadius: '8px', padding: '24px', borderLeft: '4px solid #ef4444' }}>
                      <p style={{ fontSize: '18px', fontWeight: '600', color: '#7f1d1d', marginBottom: '8px' }}>
                        "Why do we have so many spreadsheets?"
                      </p>
                      <p style={{ fontSize: '14px', color: '#b91c1c' }}>
                        Data scattered across multiple systems with no clear organization
                      </p>
                    </div>
                    <div style={{ background: '#fff7ed', borderRadius: '8px', padding: '24px', borderLeft: '4px solid #f97316' }}>
                      <p style={{ fontSize: '18px', fontWeight: '600', color: '#92400e', marginBottom: '8px' }}>
                        "It takes us forever to produce reports!"
                      </p>
                      <p style={{ fontSize: '14px', color: '#ca8a04' }}>
                        Hours spent pulling data from different sources and reconciling numbers
                      </p>
                    </div>
                    <div style={{ background: '#fefce8', borderRadius: '8px', padding: '24px', borderLeft: '4px solid #eab308' }}>
                      <p style={{ fontSize: '18px', fontWeight: '600', color: '#78350f', marginBottom: '8px' }}>
                        "Why don't our numbers match?"
                      </p>
                      <p style={{ fontSize: '14px', color: '#ca8a04' }}>
                        No clear ownership or governance leading to conflicting reports
                      </p>
                    </div>
                  </div>
                </section>

                <section style={{ marginBottom: '32px', paddingBottom: '32px', borderBottom: '2px solid #e5e7eb' }}>
                  <h2 style={{ fontSize: '24px', fontWeight: 'bold', color: '#1f2937', marginBottom: '16px' }}>
                    The Impact Measurement Gap
                  </h2>
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '32px', marginBottom: '24px' }}>
                    <div style={{ background: '#eff6ff', borderRadius: '8px', padding: '24px', borderLeft: '4px solid #2563eb' }}>
                      <p style={{ fontSize: '48px', fontWeight: 'bold', color: '#1d4ed8', marginBottom: '8px' }}>76%</p>
                      <p style={{ color: '#1f2937' }}>
                        of nonprofit leaders say <strong>impact measurement is a top priority</strong>
                      </p>
                    </div>
                    <div style={{ background: '#fef2f2', borderRadius: '8px', padding: '24px', borderLeft: '4px solid #ef4444' }}>
                      <p style={{ fontSize: '48px', fontWeight: 'bold', color: '#dc2626', marginBottom: '8px' }}>29%</p>
                      <p style={{ color: '#1f2937' }}>
                        say they are <strong>effectively measuring their outcomes</strong>
                      </p>
                    </div>
                  </div>
                </section>

                <div style={{ textAlign: 'center' }}>
                  <button
                    onClick={() => setShowIntro(false)}
                    style={{
                      padding: '16px 32px',
                      background: '#2563eb',
                      color: 'white',
                      fontWeight: 'bold',
                      borderRadius: '8px',
                      border: 'none',
                      fontSize: '18px',
                      cursor: 'pointer'
                    }}
                  >
                    Start the Assessment
                  </button>
                </div>
              </div>
            ) : !showResults ? (
              // QUESTIONS SECTION
              <div style={{ display: 'space-y-6' }}>
                {questions.map((question, idx) => (
                  <div key={question.id} style={{ background: 'white', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)', padding: '24px', borderLeft: '4px solid #2563eb' }}>
                    <div style={{ marginBottom: '24px' }}>
                      <p style={{ fontSize: '14px', fontWeight: '600', color: '#1d4ed8', marginBottom: '4px' }}>
                        {question.step}
                      </p>
                      <h3 style={{ fontSize: '18px', fontWeight: 'bold', color: '#1f2937' }}>
                        Question {idx + 1} of {questions.length}: {question.question}
                      </h3>
                    </div>

                    {/* Reflection Section */}
                    <div style={{ marginBottom: '24px', background: '#eff6ff', borderRadius: '8px', padding: '16px', borderLeft: '4px solid #93c5fd' }}>
                      <button
                        onClick={() => setExpandedReflection({
                          ...expandedReflection,
                          [question.id]: !expandedReflection[question.id]
                        })}
                        style={{
                          width: '100%',
                          display: 'flex',
                          alignItems: 'center',
                          justifyContent: 'space-between',
                          fontWeight: '600',
                          color: '#1e3a8a',
                          background: 'none',
                          border: 'none',
                          cursor: 'pointer',
                          fontSize: '14px'
                        }}
                      >
                        <span>ðŸ’­ Reflect Before Answering</span>
                        <span>{expandedReflection[question.id] ? 'â–¼' : 'â–¶'}</span>
                      </button>
                      {expandedReflection[question.id] && (
                        <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px solid #bfdbfe' }}>
                          {question.reflectionPrompts.map((prompt, pidx) => (
                            <div key={pidx} style={{ display: 'flex', marginBottom: '8px', fontSize: '14px' }}>
                              <span style={{ color: '#2563eb', fontWeight: 'bold', marginRight: '12px' }}>â€¢</span>
                              <p style={{ color: '#1e3a8a' }}>{prompt}</p>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>

                    {/* Answer Options */}
                    <div style={{ display: 'space-y-3', marginBottom: '24px' }}>
                      {question.answers.map((answer) => (
                        <label key={answer.value} style={{
                          display: 'flex',
                          padding: '12px',
                          border: `2px solid ${responses[question.id]?.value === answer.value ? '#2563eb' : '#e5e7eb'}`,
                          borderRadius: '8px',
                          cursor: 'pointer',
                          background: responses[question.id]?.value === answer.value ? '#eff6ff' : 'transparent',
                          marginBottom: '8px'
                        }}>
                          <input
                            type="radio"
                            name={`question-${question.id}`}
                            value={answer.value}
                            checked={responses[question.id]?.value === answer.value}
                            onChange={() =>
                              handleResponse(question.id, {
                                value: answer.value,
                                score: answer.score
                              })
                            }
                            style={{ marginRight: '12px', marginTop: '4px', cursor: 'pointer' }}
                          />
                          <span style={{ color: '#374151' }}>{answer.text}</span>
                        </label>
                      ))}
                    </div>

                    <div style={{ fontSize: '12px', color: '#6b7280' }}>
                      Progress: {Object.keys(responses).length} of {questions.length} questions answered
                    </div>
                  </div>
                ))}

                <button
                  onClick={() => setShowResults(true)}
                  disabled={!allAnswered}
                  style={{
                    width: '100%',
                    padding: '16px 24px',
                    background: allAnswered ? '#2563eb' : '#9ca3af',
                    color: 'white',
                    fontWeight: 'bold',
                    borderRadius: '8px',
                    border: 'none',
                    fontSize: '18px',
                    cursor: allAnswered ? 'pointer' : 'not-allowed'
                  }}
                >
                  {allAnswered ? 'Get Your Results' : `Complete All Questions (${Object.keys(responses).length}/${questions.length})`}
                </button>
              </div>
            ) : (
              // RESULTS SECTION
              <div style={{ display: 'space-y-8' }}>
                {/* Score Card */}
                <div style={{
                  background: 'white',
                  borderRadius: '8px',
                  boxShadow: '0 10px 25px rgba(0,0,0,0.1)',
                  padding: '32px',
                  borderTop: `4px solid ${calculateResults().color}`
                }}>
                  <div style={{ textAlign: 'center', marginBottom: '32px' }}>
                    <h2 style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937', marginBottom: '16px' }}>
                      Your Data Maturity Level
                    </h2>
                    <div style={{
                      display: 'inline-block',
                      padding: '12px 32px',
                      borderRadius: '9999px',
                      color: 'white',
                      fontSize: '48px',
                      fontWeight: 'bold',
                      background: calculateResults().color
                    }}>
                      {calculateResults().level}
                    </div>
                  </div>

                  <p style={{ fontSize: '18px', color: '#374151', lineHeight: '1.6', marginBottom: '24px' }}>
                    {calculateResults().interpretation}
                  </p>

                  <div style={{ background: '#f3f4f6', padding: '16px', borderRadius: '8px', marginBottom: '24px' }}>
                    <p style={{ fontSize: '14px', color: '#6b7280', margin: '0 0 8px 0' }}>Your Organization:</p>
                    <p style={{ fontSize: '16px', fontWeight: 'bold', color: '#1f2937', margin: 0 }}>
                      {userInfo.organizationName}
                    </p>
                  </div>
                </div>

                {/* Next Steps */}
                <div style={{ background: 'white', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)', padding: '32px' }}>
                  <h3 style={{ fontSize: '20px', fontWeight: 'bold', color: '#1f2937', marginBottom: '24px', display: 'flex', alignItems: 'center' }}>
                    <span style={{ marginRight: '12px' }}>ðŸ“ˆ</span>
                    Your Next Steps
                  </h3>
                  <div style={{ display: 'space-y-3' }}>
                    {calculateResults().nextSteps.map((step, idx) => (
                      <div key={idx} style={{ display: 'flex', padding: '12px', background: '#f3f4f6', borderRadius: '8px' }}>
                        <span style={{ marginRight: '12px', color: calculateResults().color }}>âœ“</span>
                        <p style={{ color: '#374151' }}>{step}</p>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Summary */}
                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '16px' }}>
                  <div style={{ background: '#f0fdf4', borderRadius: '8px', padding: '16px', textAlign: 'center', borderLeft: '4px solid #10b981' }}>
                    <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#15803d' }}>{calculateResults().aCount}</p>
                    <p style={{ fontSize: '14px', color: '#16a34a' }}>Strong Responses</p>
                  </div>
                  <div style={{ background: '#fffbeb', borderRadius: '8px', padding: '16px', textAlign: 'center', borderLeft: '4px solid #f59e0b' }}>
                    <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#b45309' }}>{calculateResults().bCount}</p>
                    <p style={{ fontSize: '14px', color: '#d97706' }}>Developing Responses</p>
                  </div>
                  <div style={{ background: '#fef2f2', borderRadius: '8px', padding: '16px', textAlign: 'center', borderLeft: '4px solid #ef4444' }}>
                    <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#991b1b' }}>{calculateResults().cCount}</p>
                    <p style={{ fontSize: '14px', color: '#dc2626' }}>Building Responses</p>
                  </div>
                </div>

                {/* Download and Reset Buttons */}
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px' }}>
                  <button
                    onClick={downloadReport}
                    style={{
                      padding: '12px 24px',
                      background: '#10b981',
                      color: 'white',
                      fontWeight: 'bold',
                      borderRadius: '8px',
                      border: 'none',
                      cursor: 'pointer',
                      fontSize: '16px'
                    }}
                  >
                    ðŸ“¥ Download Report (PDF)
                  </button>
                  <button
                    onClick={() => {
                      setResponses({});
                      setShowResults(false);
                      setShowIntro(true);
                      setFormSubmitted(false);
                    }}
                    style={{
                      padding: '12px 24px',
                      background: '#4b5563',
                      color: 'white',
                      fontWeight: 'bold',
                      borderRadius: '8px',
                      border: 'none',
                      cursor: 'pointer',
                      fontSize: '16px'
                    }}
                  >
                    Start Over
                  </button>
                </div>

                {/* Footer */}
                <div style={{ textAlign: 'center', fontSize: '14px', color: '#4b5563', background: 'white', borderRadius: '8px', padding: '16px' }}>
                  <p style={{ fontWeight: '600', marginBottom: '8px' }}>Ready to take action?</p>
                  <p>
                    Learn more from <strong>The Research and Insights Lab (TRAIL)</strong> at{' '}
                    <a href="https://www.researchinsightslab.com" target="_blank" rel="noopener noreferrer" style={{ color: '#2563eb', textDecoration: 'underline' }}>
                      www.researchinsightslab.com
                    </a>
                  </p>
                  <p style={{ marginTop: '8px' }}>Contact: ahoxie@researchinsightslab.com</p>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<NonprofitDataDiagnostic />);
</script>
    
</body>
</html>
